import { NextResponse } from "next/server"

// 샘플 종합 평가 데이터
const assessments = [
  {
    id: 1,
    title: "기업 세금 최적화 AI 활용 종합 평가",
    description:
      "기업의 세금 최적화를 위한 AI 활용 능력을 종합적으로 평가하는 테스트입니다. 이 테스트에서는 적절한 AI 모델 선택, 세금 법령 정보 추출, 오류 검증, 프롬프트 최적화 등 다양한 AI 활용 역량을 평가합니다.",
    estimatedTime: "45분",
    difficulty: "중간",
    deadline: "2025년 5월 30일 23:59",
    sections: [
      {
        id: 1,
        title: "모델 선택",
        description: "세금 법령 분석에 가장 적합한 AI 모델 선택",
        category: "selection",
        instructions: `# 과제 설명
      
기업 세금 최적화를 위한 세금 법령 분석 시스템을 구축하려고 합니다.
이 시스템은 국세청 법령 문서에서 기업에 적용되는 세금 규정을 자동으로 추출하고 분석해야 합니다.

# 요구사항

1. 'GPT-4o'와 'Claude-3' 중 어느 모델이 이 작업에 더 적합한지 결정하세요.
2. 선택한 이유를 100자 이내로 간결하게 설명하세요.
3. 모델의 특성, 강점, 약점을 고려하여 판단하세요.

# 평가 기준

- 모델 선택의 적절성 (50%)
- 선택 이유의 명확성과 논리성 (30%)
- 설명의 간결성 (20%)`,
      },
      {
        id: 2,
        title: "정보 추출",
        description: "세금 법령 문서에서 핵심 정보 추출",
        category: "input",
        instructions: `# 과제 설명

첨부된 '2024_국세청_법령.pdf'에서 '간이 과세기준' 조항을 찾아 해당 연도별 기준액을 표로 정리해야 합니다.

# 요구사항

1. PDF 문서에서 '간이 과세기준'에 관한 조항을 정확히 찾아내세요.
2. 2020년부터 2024년까지의 연도별 기준액을 추출하세요.
3. 추출한 정보를 연도별로 정리된 표 형태로 제시하세요.
4. 관련 조항 번호와 페이지를 함께 명시하세요.

# 평가 기준

- 정보 추출의 정확성 (40%)
- 정보의 완전성 (30%)
- 표 형식의 명확성 (20%)
- 출처 명시의 정확성 (10%)`,
      },
      {
        id: 3,
        title: "오류 검증",
        description: "AI 응답의 오류 식별 및 수정",
        category: "output",
        instructions: `# 과제 설명

다음 AI 응답에서 오류·허위 정보를 검출하고, 잘못된 부분을 지적 및 수정해야 합니다.

**AI 응답:**
"2025년 간이 과세기준은 연 매출 1억 원 이하입니다. 이는 2024년 기준인 8,000만 원에서 상향 조정된 것으로, 소규모 사업자의 세금 부담을 줄이기 위한 조치입니다. 간이 과세자는 일반과세자에 비해 신고 절차가 간소화되며, 부가가치세율도 5%로 낮게 적용됩니다. 또한 2025년부터는 모든 간이 과세자에게 전자세금계산서 발행이 의무화됩니다."

# 요구사항

1. 위 응답에서 사실과 다른 정보를 모두 찾아내세요.
2. 각 오류에 대해 왜 잘못되었는지 설명하세요.
3. 올바른 정보로 수정하세요.

# 평가 기준

- 오류 검출의 정확성 (40%)
- 오류 설명의 명확성 (30%)
- 수정 정보의 정확성 (30%)`,
      },
      {
        id: 4,
        title: "프롬프트 최적화",
        description: "효율적인 프롬프트 작성",
        category: "efficiency",
        instructions: `# 과제 설명

다음 프롬프트를 20토큰 이내로 최적화하여 동일한 결과를 얻어야 합니다.

**원본 프롬프트:**
"2024년 국세청 법령에서 간이 과세기준에 관한 내용을 찾아서 2020년부터 2024년까지의 연도별 기준액을 표 형태로 정리해주세요. 각 연도별로 기준액이 어떻게 변화했는지 명확하게 보여주는 것이 중요합니다. 표에는 연도와 기준액 두 열만 포함하면 됩니다."

# 요구사항

1. 원본 프롬프트의 핵심 요구사항을 유지하세요.
2. 최적화된 프롬프트는 20토큰 이내여야 합니다.
3. 최적화된 프롬프트로 원본과 동일한 결과를 얻을 수 있어야 합니다.

# 평가 기준

- 토큰 효율성 (50%)
- 결과의 동등성 (40%)
- 명확성 유지 (10%)`,
      },
      {
        id: 5,
        title: "프롬프트 개선",
        description: "기존 프롬프트 개선 및 분석",
        category: "improve",
        instructions: `# 과제 설명

다음 프롬프트를 개선하여 더 정확하고 유용한 응답을 얻어야 합니다.

**원본 프롬프트:**
"PDF에서 세금 정보 알려줘"

**AI 응답:**
"PDF 문서에서 세금 정보를 찾기 위해서는 더 구체적인 정보가 필요합니다. 어떤 PDF 문서인지, 어떤 종류의 세금 정보를 찾고 있는지, 특정 연도나 지역에 관한 정보인지 알려주시면 더 도움이 될 것 같습니다."

# 요구사항

1. 원본 프롬프트를 개선하여 더 명확하고 구체적인 응답을 얻을 수 있도록 하세요.
2. 개선된 프롬프트는 200자 이내여야 합니다.
3. 원본 프롬프트의 불충분한 점을 2가지 이상 지적하세요.

# 평가 기준

- 프롬프트 개선의 효과성 (40%)
- 문제점 분석의 정확성 (30%)
- 개선된 프롬프트의 명확성 (30%)`,
      },
    ],
  },
  // 다른 평가들...
]

export async function GET(request: Request, { params }: { params: { id: string } }) {
  const id = Number.parseInt(params.id)
  const assessment = assessments.find((a) => a.id === id)

  if (!assessment) {
    return NextResponse.json({ error: "Assessment not found" }, { status: 404 })
  }

  return NextResponse.json({ assessment })
}
